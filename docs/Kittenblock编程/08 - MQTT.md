---
title: 08 - MQTT
sidebar_position: 9
---




## 概述

---

MQTT是物联网应用中一种订阅制的消息传递协议，其应用方法相对简单。




## 快速开始
:::info
以下的教程案例，将以KittenBot家的IoT平台作为服务器，如果你还没有使用过我们的iot平台请先注册[https://iot.kittenbot.cn/](https://iot.kittenbot.cn/)
:::

1. 创建MQTT话题<br />![image.png](1670325170546-3ad6649c-16c6-4b4e-a05a-1434cb2f5975.png)

2. 设置话题路径（填写话题用户名和密码可以将话题设置为私人使用，这里暂时不填写，该话题将作为公共话题，所有人获取该话题路径均可查看）<br />![image.png](1670325511280-a1c2ee2a-8643-47c5-bc8c-b515140602f4.png)
:::warning
话题全平台唯一，请设置相对个性化的话题，尽量不要设置如temp等常规名称
:::

3. 创建完成，现在点击连接话题<br />![image.png](1670325614453-1d397c6a-7b6d-4592-9f12-a062616a9a44.png)

4. 发送测试消息<br />![image.png](1670325693953-94a34fdb-6b57-4336-8c6d-c15f27a17768.png)
:::warning
可能需要刷新才能看到新的消息<br />![image.png](1670325784181-4064761a-b7e5-4a18-a905-10200b622763.png)
:::





## 应用方式

---



### 积木介绍
| **编程积木块** | **功能介绍** |
| --- | --- |
| ![2022-12-01_13-52-22.png](1669874069000-ca226cc4-f86c-44d4-88b3-e3b456b947ca.png) | 连接wifi |
| ![2022-12-01_13-54-50.png](1669874115795-679b7c7e-341c-4b18-b905-751f51c0461e.png) | 返回wifi ip地址，未连接返回0.0.0.0 |
| ![2022-12-01_13-57-13.png](1669874283281-93045210-28dd-4a53-be36-52575c0217db.png) | 连接喵家mqtt服务器，公共话题 |
| ![2022-12-01_13-58-22.png](1669874319579-7114e974-ca61-46b4-93d2-3f6f581c6093.png) | 需要使用私人的mqtt话题，可以使用此积木输入用户名和密码 |
| ![2022-12-01_13-58-56.png](1669874356701-084e1ed1-a2c9-4ded-865c-c0dea633874e.png) | 订阅话题 |
| ![2022-12-01_13-59-37.png](1669874399164-cb70e2ae-cc6c-4950-b805-00becceb178f.png) | 向话题发送消息 |
| ![2022-12-01_14-00-20.png](1669874441495-c81b3703-4908-49ac-8433-c4f1d941a4c1.png) | 读取话题消息，需要先订阅 |





### 基础案例


#### 案例1 - 智能家居灯
:::warning
这个案例介绍的是两块葡萄板的通讯控制，如果你手头只有一块葡萄板，可以将葡萄板做为`受控端`，并通过MQTT服务器页面直接发送指令给对应话题进行控制
:::

- 效果：以MQTT服务器作为媒介，让你能够远程控制设备

![image.png](1670298755599-b39c3142-c38c-41f5-be67-252541907db5.png)

- 程序 - 控制端

![2022-12-06_19-05-52.jpg](1670325006788-cb48fd4d-a390-449d-a443-dfac47330fda.jpeg)

- 程序 - 受控端

![2022-12-06_19-05-52.jpg](1670325023732-1ba1731d-c008-441d-914f-6bf45708d07d.jpeg)

